<!DOCTYPE html>
<html>
<head>
	<title>GamePlay Screen</title>	
	<script type="text/javascript" src="js/jquery-1.11.0.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.10.4.custom.min.js"></script>
	<script type="text/javascript" src="js/kinetic-v5.0.1.min.js"></script>
	<script type="text/javascript" src="js/gameplay.js"></script>
	<link rel="stylesheet" type="text/css" href="css/mystyle.css" />
</head>
<body>
<div id="main" class="gameplay">
	<progress id="progressBar" value="0" max="100"></progress>
	<button type="button" id="pauseBtn">Pause</button>
	<div id="container"></div>
	<div id="dialog" title="Pause"></div>
	<script defer="defer">
function updateProgress(newValue) {
    var pBar = document.getElementById('progressBar');
    pBar.value += newValue;
}

function getRandomX() {
    var numX = Math.floor(Math.random() * 6) + 1;
    if (numX <= 2) {
        return 10;
    } else if ((num <= 4) && (numX > 2)) {
        return 50;
    } else {
        return 100;
    }
}

function getRandomY() {
    var numY = Math.floor(Math.random() * 6) + 1;
    if (numY <= 2) {
        return 10;
    } else if ((numY <= 4) && (numY > 2)) {
        return 50;
    } else {
        return 100;
    }
}

    var stage = new Kinetic.Stage({
        container: 'container',
        width: 1000,
        height: 450
    });
    var layer = new Kinetic.Layer();

    var mouseObj = new Image();
    var mouse = new Kinetic.Image({
        x: 0,
        y: 10,
        width: 180,
        height: 150,
        draggable: true,
        opacity: 1.0,
        image: mouseObj,
    });

    mouseObj.src = 'http://imgur.com/KUSUobb.png';

    mouse.on('dragmove', function() {
        if (areTheyColliding(mouse, invisBox)) {
            mouse.opacity(0);
            setTimeout(function() {
                updateProgress(0.5);
                mouse.opacity(1);
            }, 1000);        
            mouse.setX(90);
            mouse.setY(10);

        }
    });

    mouse.on('dragend', function() {

    });

    // box inside the bowl
    var invisBox = new Kinetic.Rect({
        x: 300,
        y: 405,
        width: 10,
        height: 10,
        fill: 'none',
        stroke: 'none',
        strokeWidth: 2
    });

    // bowl
    var bowlObj = new Image();
    var target = new Kinetic.Image({
        x: 200,
        y: 330,
        width: 250,
        height: 120,
        image: bowlObj
    });
    bowlObj.src = 'http://imgur.com/iZn40QK.png';

    function areTheyColliding(rect1, rect2) {
        return !(rect2.getX() > rect1.getX() + rect1.getWidth() || //
            rect2.getX() + rect2.getWidth() < rect1.getX() || // 
            rect2.getY() > rect1.getY() + rect1.getHeight() || //
            rect2.getY() + rect2.getHeight() < rect1.getY()); //
    }
    layer.add(target);
    layer.add(mouse);
    layer.add(invisBox);
    stage.add(layer);


	</script>
</div>
</body>
</html>


